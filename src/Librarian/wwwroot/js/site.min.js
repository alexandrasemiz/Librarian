!function(){function o(o,n){function e(o){for(var n=[],e=0;o>=e;)n.push(e),e++;return n}var s=this;s.enterLibrary=!1,s.showRating=!1,s.newBookForm=!0,s.showTable=!0,s.showMessage=!1,s.showMarking=!0,s.arrRating=e(10),s.selectLibrary=function(o){n.get("/Book/List?libraryId="+o).success(function(o){document.getElementById("list-books").style.display="block",s.enterLibrary=!0,s.showRating=!1,s.showTable=!0,s.showMessage=!1,s.showMarking=!1,s.books=o.Data}).error(function(o){s.enterLibrary=!1})},s.takeBook=function(o){n.post("/Book/Take?bookId="+o).success(function(o){s.message=o.Message,s.showTable=!1,s.showMessage=!0,s.showMarking=!1}).error(function(o){s.message="Не удалось взять книгу. Попробуйте еще раз."})},s.returnBook=function(o){n.post("/Book/Return?bookId="+o).success(function(o){s.message=o.Message,1==o.Success&&(s.showTable=!1,s.showRating=!0,s.showMarking=!1,s.currentBook={Id:o.BookId,Name:o.BookName,Author:o.BookAuthor})}).error(function(o){s.message="Не удалось вернуть книгу. Попробуйте еще раз."})},s.putRating=function(o,e,r){var t;t=e?r?"ratingMark="+e+"&ratingComment="+r:"ratingMark="+e:r?"ratingComment="+ratingCommen:"",$("#id-rating-mark").val("0"),$("#id-rating-comment").val(""),n.post("/Book/Estimate?bookId="+o+"&"+t).success(function(o){s.message=o.Message,s.showRating=!1,s.showMessage=!0}).error(function(o){s.showRating=!1})},s.addBook=function(){s.newBookForm=!1},s.addNewBook=function(o,e){n.post("/Book/Add?bookName="+o+"&bookAuthor="+e).success(function(o){s.newBookForm=!0}).error(function(o){})},s.ratingBook=function(o){n.post("/Book/GetRating?bookId="+o).success(function(o){s.showTable=!1,s.showMarking=!0,s.markResult=o.Data}).error(function(o){})}}var n=angular.module("library",[]);n.controller("libraryController",o)}();